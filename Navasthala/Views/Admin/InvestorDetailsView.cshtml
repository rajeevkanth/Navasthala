


<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>InvestorDetailsView</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js" type="text/javascript"></script>
    <link href="/Content/ui.jqgrid.css" rel="stylesheet" type="text/css" />
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/start/jquery-ui.css" rel="Stylesheet" type="text/css" />
    <link href="/Jqgrid/css/ui.jqgrid.css" rel="stylesheet" type="text/css" />
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/start/jquery-ui.css" rel="Stylesheet" type="text/css" />
    <script src="/Jqgrid/Scripts/jquery.validate.min.js" type="text/javascript"></script>
    <script src="/Jqgrid/Scripts/grid.locale-en.js" type="text/javascript"></script>
    <script src="/Jqgrid/Scripts/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="/Jqgrid/Scripts/jquery.maskedinput-1.2.2.min.js" type="text/javascript"></script>

</head>
 
  
    <script type="text/javascript">
        $(document).ready(function ()
        {
            var updateDialog =
            {
                url: "@Url.Action("UpdateInvestor","Admin")"
                , closeAfterAdd: true
                , closeAfterEdit: true
                , afterShowForm: function (formId) {
                    //$("#PhoneNumber").mask("(999) 999-9999");
                    //$("#DateOfInvestment").datepicker();
                }
                , afterclickPgButtons: function (whichbutton, formid, rowid) {
                   // $("#PhoneNumber").mask("(999) 999-9999");
                }
                , modal: true
                
                , onclickSubmit: function (params) {
                    var ajaxData = {};

                    var list = $("#list");
                    var selectedRow = list.getGridParam("selrow");
                    rowData = list.getRowData(selectedRow);
                    ajaxData = { InvestmentId: rowData.InvestmentId,UserId:rowData.UserId };

                    return ajaxData;
                }
                
                , width: "400"
            };
            $.jgrid.nav.edittext = "Edit";
            $.jgrid.nav.deltext = "Delete";
            $.jgrid.edit.editCaption = "Edit Investor";
            $.jgrid.del.caption = "Delete Investor";
            $.jgrid.del.msg = "Delete selected Investor?";
            
            $("#list").jqGrid({
                url: "@Url.Action("ListInvestors","Admin")",
                datatype: 'json',
                mtype: 'GET',
                colNames: ['LastName', 'E-mail', 'DateOfInvestment', 'InvestedAmount', 'Maturity', 'FinalAmount', 'InvestmentId','UserId'],
                colModel: [
                    { name: 'LastName', index: 'LastName', width: 100, align: 'left', editable: true, edittype: 'text', editrules: { required: true }, formoptions: { elmsuffix: ' *'} },
                    { name: 'Email', index: 'Email', width: 100, align: 'left', formatter: 'mail', editable: true, edittype: 'text', editrules: { required: true, email: true }, formoptions: { elmsuffix: ' *'} },
                    { name: 'DateOfInvestment', index: 'DateOfInvestment', width: 75, align: 'left', formatter: 'date', datefmt: 'm/d/Y', editable: true, edittype: 'text', editrules: { required: true, date: true }, formoptions: { elmsuffix: ' *' } },
                    { name: 'InvestedAmount', index: 'InvestedAmount', width: 75, align: 'left', editable: true, edittype: 'text', editrules: { required: true}, formoptions: { elmsuffix: ' *' } },
                    { name: 'Maturity', index: 'Maturity', width: 70, align: 'left', editable: true, edittype: 'text', editrules: { required: true}, formoptions: { elmsuffix: ' *' } },
                   { name: 'FinalAmount', index: 'FinalAmount', width: 75, align: 'left', editable: true, edittype: 'text', editrules: { required: true }, formoptions: { elmsuffix: ' *' } },
                   { name: 'InvestmentId', index: 'InvestorId', width: 40, align: 'left', /* key: true,*/ editable: false, editrules: { edithidden: false }, hidedlg: true, hidden: true },
                   { name: 'UserId', index: 'UserId', width: 40, align: 'left', /* key: true,*/ editable: false, editrules: { edithidden: false }, hidedlg: true, hidden: true }
                ],
                
                pager: $('#listPager'),
                //rowNum: 1000,
                //rowList: [1000],
                sortname: 'UserName',
                sortorder: "desc",
                viewrecords: true,
                imgpath: '/Content/Themes/Redmond/Images',
                caption: 'Investor List',
                autowidth: true
            }).navGrid('#listPager',
                {
                    edit: true, del: true, search: false, refresh: true,add:false
                },
                updateDialog,
                updateDialog,
                updateDialog
            );
         

            $('#login').mousedown(function (e) {
                e.stopPropagation();
                window.location.href = "@Url.Action("Login","Account")";
            });

            $('#User').mousedown(function (e) {
                e.stopPropagation();
                window.location.href = "@Url.Action("CurrentUser","Home")";
            });

            $('#logoff').mousedown(function (e) {
                e.stopPropagation();
                window.location.href = "@Url.Action("LogOff","Account")";

            });

            $('#Home').mousedown(function (e) {
                e.stopPropagation();
                window.location.href = "@Url.Action("Index","Home")";
            });
        }
);
    </script>
<div class="page-region-content fg-color-white">
      <table id="list" class="scroll"></table>
    <div id="listPager" class="scroll" style="text-align:center;"></div>                                                            
<div id="listPsetcols" class="scroll" style="text-align:center;"></div>  
</div>

